{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{\"172\":function(e,t,n){},\"174\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAMAAABgZ9sFAAAB9VBMVEUiIiIAAACsekc7MSmJclmxd0H7zqJ5Vzb7w6CagmTYpXP90KT2x5q4f0qyeUPvwJL4y57CjFeyekS3gEuvdkH80KOud0OueUfguJGbbkPGon6qgl97XUNrTTKze0dMQCrruY24ek7VqoCpckGgbz9MPjfwwZO/h1Lks4TJk2D7z6LktITKk2D3yp2/h1K2fUfap3bUoG6xd0H8z6LquovDjFmyeEPAiFTbqXjRnGq7gk63fkn1x5qwdkDltYj2yZy1fEfzxJe6gk7xxJjwwZXeroDIk2H3y6DltYbHkV3dqnvOmmevdkC0ekbwwpW8g0/90KXgrn/MmGWvdj/EkWHwxZzqwJbgtIm1gE+/iVX6zaHru4zrwZioc0G5iVn6zaLmtojEjluweED5zaPJnHG7jV/er3/HlGLQp3z4y53rvpC+hVKxeUXIpYKKYTjFpYDxwpe2fEn2xpfsxpfms5mZZjP6zJ/wwJPvwZP+0qT90KTquo3pu473yp33yp7VpnnVpXnxxpzVqH7XqoCicEGOYjuRZDyOcFKxd0L90KO1e0b5y572yJrpuYrgrn3WonHNl2W7g064f0r7zaDyw5Xuv5DRnWvIkV7DjFnAiFS0ekTltITbqHf0xZfsvI7ntobisYHcqnnap3bUn27Pm2nFj1vBilZUMenhAAAAiHRSTlMPAAgRHPvgIAgg/vzh4eHf0tLSy8C+eFZVOTgzHRwbFBMSCYJWEf7+/Pz5+fn39/fy8vHp6enp4d3d3d3c3NDPz87Oy8vCwr+/v7y8u5+YmI2NjY2GhXp5eXd2dm5ubGBfX19WVlZVVVJOTk5OMzIwIyMbGwoK/vf28fHS0Z+eh4V+bWxSNDMib4cMDQAAAdFJREFUSMeVlmVTKzEUhg+7W8PdSil23bnuhru7u7u7k9QFd/+dhDJAW1o2eb7uMzuTHHkDHk7EthZkfn1n9Hz7JSO/Jcb5q6PO1ac/M5nONk6NnifHBsPR07S6OLc6V/7xfPNlSlGzMopXryqbZpNfHOo/VMa51js/X2wF1ESBHcLCL/2BX4cLnct9sh0QBvdom1x/nCN31qP/mV+X8eACvnR07e+Ao97vY/4WAW6I9Nv37rPXo30sQTJwiyJJ5z14pw//sQSp4AGE/7rfQ7d6tua7DB5E8UM7c6N3ad5EgAiRr0bar3XOVxMKopRopXKbHroTyIvrj/ytFVc692lnCSgIt76XE70BBQIV/riW6MGomk6vwiEeECuRqOh04blXDIShYKAkFTdCIYqn1YtxHmShBFo9HIfAT7RCq3djKSQiFa0u4AmQoLuS9vhqLObtrU3ThnHPsKtfX9Nppb12hcVeRFfDDfHonm6dd9QTkYz27wIeJ0ddZjgq40Uylom1CUiLyehsBWkxtgZmHw8yfAn0w2cbbbW4rSajzbg4WNaStp1p6U0zrlS2hc0WB/RhM0bChjrKpmxRRheUi7agFI9hXlA2zTnFMHvIMz4hLgE7R6MYiBoOZQAAAABJRU5ErkJggg==\"},\"175\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAMAAABgZ9sFAAAA6lBMVEUAAADsvHf5zZDywYPwwX3sunT/xo76z5Tzw4PruHHzxIP5zZDwwH7tvHXtu3btvnb4zJD2xoD6zpTruHH1yYvtvXn7z5PruXLuvXn6z5TzxoXxwoDquHHrunPsu3b60JP1yYnrt3H0xobquHD6z5PquXP5zpL4zI7su3b0x4bxwH/pt3D70JX4yov7z5L3yYr5zpL2yIjru3fouXH60ZL6zpLwwH3tu3b0xob1yIj3y40tLTTywoD5zZDzxIP6z5LruXL2yYvvvnruvXj4zI7sunNFPz0wLzXZs4DSqW+Xfl6JcliIclgzMjZDw1HDAAAANnRSTlMACOAaEuAJ/Pz88c67dV5UTSLx8enp6Ojg29vb287Nvb29urq5np2Xl42NjYx2dV5UU01NXl5HAZ5TAAABJ0lEQVRIx5XW15aCMBAG4AGxt1W39957oYVm33X1/V9HOXoUTMD8c/0xDCGZCa2H9vFweVgqFEpHlce6RqmhvJ1blmmanuc5jqPreqWmJOLcy3bbinO9s1NNeGBLtds873T3P0V13Nm2mHeNe+4FmXIvmRunmbhuqL00bmQbsdyqm8ZDH8mfK7ubeP9kVf+tu5n3b5Yr6Mvw4GtRiirHs/NyXn2ejyf/HA+qoVZ2BXzIhjzfC9P/+ALOGON5UJvxM3l+QaTl5XlRo3dfngd1ekb4E10j/IoOEH5MTYS3KL/ivwPGx+AvwotRPmKiGMV4E8neAj8VXEjwN4GbANxi6Aamb+B4gIcPO9pg48DaEtb0wJaKNWxsHGDDBhtl8KDExzA+5MErxBS1hn9NplRLnwAAAABJRU5ErkJggg==\"},\"176\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAu4AAABaCAMAAADQByOyAAAAh1BMVEX5zZH6z5P4zI/3y43tu3bruXPruHHuvXjsunTvvnr2yIn1x4fxwoDwwH7yw4LzxIT0xobwv3z2yovrunNDLyNiRzRGMSRSOytOOClfRTLgtHhJNCbQpm+7lmVaQS9WPi2RcE2AYkTCm2h2Wj7nuXx8X0KbeVNlSTWxjF9vUzqmglnYrXSLakqvKbtwAAAEsklEQVR42uzdyZaaQBSA4cyJiUAGDaEoZCqQ6f2fL5dGCHQgalZl8v+LPlW36vTq06NuePHu9t7e0bdvH27rzR29v7XdTX3ZyrnW/qbcm/Ju6PN2n6728Za+rvb6nl7d24u/7uXfBne4wx3ucIc73OEOd7jDHe5whzvc4Q53uMMd7nCHO9zhDne4wx3ucIc73OEOd7jDHe5whzvc4Q53uMMd7nCHO9zhDne4wx3ucIc73OEOd7jDHe5whzvc4Q53uMMd7nCHO9zhDne4wx3ucIc73P8b7lVZVte493c2uXf62SCKIgV3uFvJPT8c8mvc+ztb3LWctYvJ4XCI4A73f5J7IroV3OH+X3B3/MOh9uAO90fmbtS8/s5iYLyxqscNd7g/NPfy8MdKb6w+HGIH7nC3mPtxG3JxH/dMNo0Hd7jbzP37ZiP3739s4l5//x4bb5mcwx3u9nA/X+Wu9DxBXS8GyhuKBvrq+1oR3OFuA/cF5TCcU27dlYowLNZ+mTFBGIaRcA/XgjvcreA+r6c8/6p6D/cyhDvc/xfuOrxwd6J5MksiScEd7g/D3aipPAzzaeOM2s1x5L5MZnxVhbul3H/8SFe5pz/W097Q/nLhN+4ygzvc7eSe/i33UtblL+4G7nC3kLtKFwU/fgTLibmNu5wX+5G76mINd7hbyN2/kho/u2vZRGpe7fuB8YYqvzZef0PWJvD983ggM7jD/cG4S4Xvp+6sSk4b75I6K2/gLvUn+R7ucLeNu0l+dfT9OHmemXhnIjdzp9rA92vHG1PeyF1KZFXCHe62cZ/VxnGcXNZm7/5eEcfnSb+p4/jUeovkHwzcnVqW2TjL4A5367in4lcN2Mtju8JdBXFc7Ib1rhDHjbvKXWpP/UsD7nC3lXsmMMunlZPHcW1WvEdyJd09aU9lmbi/c88uy6q/Cne4W8rd1KfT2Qzr6nQ6de5KjRwU8kIwhSzS3XPuMhy5u/2NaJjBHe62ce8lV+Mm6Tdb3mut60H7JndJHU+pgTvcreSug9Mpd+Zv9UG75T0I5E8n2re5S1XleXCHu43cVR0EgZ7pl22+W/MeBU81e/d37jIfuC9ncIe7Vdyd9EnwrKYfrGhvu4F7kcEd7o/J3UkEZecsRoWM9HPsOgmmisiBO9wfj/v7HnFuBuaq1VnVlF3+28cZUxVBX55d3uLrsoU73B+Mu86PUlKWXZqfj4uaybqKuuGsrvayzdLhQl5qx5uSwXPuSmZwh7s93JPjZufWlRzdFJdB/wlmSHfjnaQya9x1l5RlmcMd7lZxr+bA81SUNlWmW5PJtnviXoywtTtLNfkwr1e5q+k1Y+AOd2u4t0nZAxfhard4nEF3zgff+ix1kXGftddlLScT8fnac+vzUMXjDOBuD/f1RLMqR+BNEqmNp3e0VeONJUmivamoekrx9A64PwJ3HlYDd7jDHe5whzvc4Q53uMMd7nCHO9zhDne4wx3ucIc73OEOd7jDHe5whzvc4Q53uMMd7nCHO9zhDne4wx3ucIc73OEOd7jDHe5wh/vPdulAAAAAAECQv/UKAxRDuuuuu+6666677rrrrrvuuuuuu+6666677rrrrrvuui8BbdBj0qvu6gsAAAAASUVORK5CYII=\"},\"352\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",function(){return H});var a=n(0),o=(n(172),n(1)),r=n(385),s=n(8),c=n(87),u=n(88),i=n(5),l=n(10),d=n(110),m=n(85),p=n(174),h=n.n(p),b=n(175),f=n.n(b),g=n(138),y=n.n(g),A=n(86),v=n.n(A),j=n(176),E=n.n(j),N=n(89),S=n.n(N),P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},w=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var H=function(e){function Booking(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Booking);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Booking.__proto__||Object.getPrototypeOf(Booking)).call(this));return e.config={\"navigationBarTitleText\":\"确认点餐\"},e.state={\"currentPoint\":{},\"orderInfo\":null,\"priceTotal\":0,\"count\":1,\"couponStr\":\"\",\"cValue\":\"\",\"couponStyle\":!1,\"currentCoupon\":{},\"businessHours1\":\"\",\"businessHours2\":\"\",\"businessHours3\":\"\",\"businessHours4\":\"\"},e.canPayClick=!0,e}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Booking,o[\"a\"].Component),w(Booking,[{\"key\":\"componentWillMount\",\"value\":function componentWillMount(){Object(m.b)(\"currentCoupon\",{}),Object(m.b)(\"notUseCoupon\",!1);var e=this.$router.params.dishInfo,t=JSON.parse(decodeURIComponent(e)),n=t.storesDetails,a=parseFloat(t.dishPricee);this.setState({\"currentPoint\":n,\"orderInfo\":t,\"priceTotal\":a,\"businessHours1\":t.storesDetails.suppleTime1,\"businessHours2\":t.storesDetails.suppleTime2,\"businessHours3\":t.storesDetails.suppleTime3,\"businessHours4\":t.storesDetails.suppleTime4}),this.getCouponList(t,a),this.getWeChatJSApiParam()}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){var e=this.$router.params.dishInfo,t=JSON.parse(decodeURIComponent(e)),n=parseFloat(t.dishPricee);if(Object(m.a)(\"couponChanged\")||!1){Object(m.b)(\"couponChanged\",!1);var a=Object(m.a)(\"currentCoupon\")||{};this.setState({\"currentCoupon\":a});var o=a.faceValue?a.faceValue:0,r=o>0&&\"2\"==a.type?\"- ¥\"+o:\"请选择优惠券\",s=this.state.orderInfo;if(o>0?this.setState({\"couponStyle\":!0}):this.setState({\"couponStyle\":!1}),this.state.count>=1&&0==o){var c=Number(this.state.count*s.dishPricee);this.setState({\"priceTotal\":c,\"couponStr\":r,\"cValue\":o})}else{var u=Number(this.state.count*s.dishPricee-o);u>0?this.setState({\"priceTotal\":u,\"couponStr\":r}):this.setState({\"priceTotal\":0,\"couponStr\":r})}}else{Object(m.a)(\"notUseCoupon\")||this.getCouponList(t,n)}}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"calculate\",\"value\":function calculate(e){var t=this.state.orderInfo.dishPricee-e;t<0?this.setState({\"priceTotal\":0}):this.setState({\"priceTotal\":t})}},{\"key\":\"render\",\"value\":function render(){var e=this.state,t=e.currentPoint,n=e.orderInfo,o=e.count,r=e.priceTotal,i=e.couponStr,l=e.couponStyle,d=e.businessHours1,m=e.businessHours2,p=e.businessHours3,b=e.businessHours4;return a.j.createElement(s.a,{\"className\":\"container-book\"},a.j.createElement(s.a,{\"className\":\"book-point\"},a.j.createElement(s.a,{\"className\":\"bp-info\"},a.j.createElement(s.a,{\"className\":\"bpi_name\"},a.j.createElement(c.a,{\"className\":\"bpin-name\"},t.name)),a.j.createElement(s.a,{\"className\":\"bpi-address\"},\"距您\",t.number>=1e3?a.j.createElement(c.a,{\"className\":\"bpi-address-distance\"},(t.number/1e3).toFixed(1),\" \",a.j.createElement(c.a,{\"className\":\"booking_unit\"},\"km\")):a.j.createElement(c.a,{\"className\":\"bpi-address-distance\"},t.number,a.j.createElement(c.a,{\"className\":\"booking_unit\"},\"m\")),a.j.createElement(c.a,{\"className\":\"margin_10\"},\"|\"),\"  \",t.adds),void 0!==d?a.j.createElement(s.a,{\"className\":\"bpi_businessHours\"},a.j.createElement(c.a,{\"className\":\"margin-r-18\"},\"营业时间 : \"),a.j.createElement(c.a,null,d,\" \",m,\" \",p,\" \",b)):a.j.createElement(s.a,{\"className\":\"bpi_businessHours\"},a.j.createElement(c.a,null,\"营业时间：\"),1==t.times.length&&a.j.createElement(c.a,null,t.times[0]),2==t.times.length&&a.j.createElement(c.a,null,t.times[0],\" / \",t.times[1]),3==t.times.length&&a.j.createElement(c.a,null,t.times[0],\" / \",t.times[1],\" / \",t.times[2]),4==t.times.length&&a.j.createElement(c.a,null,t.times[0],\" / \",t.times[1],\" / \",t.times[2],\" / \",t.times[3]))),a.j.createElement(s.a,{\"className\":\"bp-navigator\",\"onClick\":this.goLocation.bind(this)},a.j.createElement(u.a,{\"className\":\"bpn-img\",\"src\":y.a,\"style\":\"pointer-events: none\"}))),a.j.createElement(s.a,{\"className\":\"order-detail\"},a.j.createElement(s.a,{\"className\":\"order-meal\"},a.j.createElement(u.a,{\"className\":\"order-icon\",\"src\":n.dishUrl,\"mode\":\"aspectFill\"}),a.j.createElement(s.a,{\"className\":\"order-info\"},a.j.createElement(s.a,{\"className\":\"order-title\"},n.dishName),a.j.createElement(s.a,{\"className\":\"order-subheading\"},n.dishesRemake),a.j.createElement(s.a,{\"className\":\"price-count\"},a.j.createElement(c.a,{\"className\":\"order-price\"},\"¥\",n.dishPricee),a.j.createElement(s.a,{\"className\":\"order-count\"},a.j.createElement(s.a,{\"onClick\":this.subNum.bind(this)},a.j.createElement(u.a,{\"src\":h.a,\"className\":\"count-btn\",\"style\":\"pointer-events: none\"})),a.j.createElement(c.a,{\"className\":\"count\"},o),a.j.createElement(s.a,{\"onClick\":this.addNum.bind(this)},a.j.createElement(u.a,{\"src\":f.a,\"className\":\"count-addBtn\",\"style\":\"pointer-events: none\"})))))),a.j.createElement(s.a,{\"className\":\"meal-line\"}),a.j.createElement(s.a,{\"className\":\"order_meal_coupons\",\"onClick\":this.toCouponsList.bind(this)},a.j.createElement(s.a,{\"className\":\"order_meal_coupons_title\"},\"优惠券\"),a.j.createElement(s.a,{\"className\":\"order_meal_coupons_right\"},a.j.createElement(c.a,{\"className\":l?\"order_meal_coupons_price2\":\"order_meal_coupons_price\"},i),a.j.createElement(u.a,{\"className\":\"order_meal_coupons_img\",\"src\":v.a,\"style\":\"pointer-events: none\"}))),a.j.createElement(s.a,{\"className\":\"meal-line\"}),a.j.createElement(s.a,{\"className\":\"fee-view\"},a.j.createElement(s.a,{\"className\":\"fee-content\"},a.j.createElement(c.a,{\"className\":\"fc-total\"},\"合计\"),a.j.createElement(s.a,{\"className\":\"fc-flag\"},\"¥\",a.j.createElement(c.a,{\"className\":\"fc-num\"},r.toFixed(2)))))),a.j.createElement(s.a,{\"className\":\"btn-view\",\"onClick\":this.bookingMeals.bind(this)},a.j.createElement(u.a,{\"src\":E.a,\"className\":\"booking-btn\",\"style\":\"pointer-events: none\"})))}},{\"key\":\"goBack\",\"value\":function goBack(){o.a.navigateBack()}},{\"key\":\"subNum\",\"value\":function subNum(){var e=this.state,t=e.count,n=e.orderInfo;if(t>1){t--;var a=Number(parseFloat(n.dishPricee)*t);this.setState({\"count\":t,\"priceTotal\":a}),this.getUsableCoupons(a,n,t)}}},{\"key\":\"addNum\",\"value\":function addNum(){var e=this.state,t=e.count,n=e.orderInfo;t++;var a=Number(parseFloat(n.dishPricee)*t);this.setState({\"count\":t,\"priceTotal\":a}),this.getUsableCoupons(a,n,t)}},{\"key\":\"getUsableCoupons\",\"value\":function getUsableCoupons(e,t,n){var a=this,o=localStorage.getItem(\"userId\");i.a.request({\"url\":\"heque-coupon/discount_coupon/order_info_get_coupon\",\"method\":\"GET\",\"data\":{\"userId\":o,\"totalPrice\":e,\"dishId\":t.dishId,\"storeId\":t.storesDetails.id},\"success\":function success(e){if(e.data.length>0){var o=e.data.filter(function(e){return 2==e.type});if(o.length>0){o.sort(function(e,t){return t.faceValue-e.faceValue});var r=o[0];Object(m.b)(\"currentCoupon\",r),a.setState({\"currentCoupon\":r});var s=r.faceValue?r.faceValue:0,c=s>0&&\"2\"==r.type?\"- ¥\"+s:\"请选择优惠券\",u=Object(m.a)(\"notUseCoupon\")||!1;if(s>0&&!u){var i=Number(parseFloat(t.dishPricee)*n-s),l=i>0?i:0;a.setState({\"priceTotal\":l,\"couponStr\":c,\"cValue\":s,\"couponStyle\":!0})}else Object(m.b)(\"currentCoupon\",{}),a.setState({\"couponStr\":\"请选择优惠券\",\"couponStyle\":!1,\"currentCoupon\":{}})}else a.setState({\"couponStr\":\"请选择优惠券\",\"couponStyle\":!1})}}})}},{\"key\":\"getWeChatJSApiParam\",\"value\":function getWeChatJSApiParam(){i.a.request({\"url\":\"heque-eat/we_chat_public_number/get_signature?url=\"+encodeURIComponent(location.href.split(\"#\")[0]),\"method\":\"GET\",\"success\":function success(e){S.a.config({\"debug\":!1,\"appId\":\"wxed1d300ad50d204f\",\"timestamp\":e.data.timestamp,\"nonceStr\":e.data.nonceStr,\"signature\":e.data.signature,\"jsApiList\":[\"openLocation\",\"getLocation\",\"chooseWXPay\"]}),S.a.ready(function(){S.a.error(function(e){console.log(\"config信息验证失败,err=\"+JSON.stringify(e))})})}})}},{\"key\":\"goLocation\",\"value\":function goLocation(){var e=this.state.currentPoint;S.a.openLocation({\"latitude\":e.latitude,\"longitude\":e.longitude,\"name\":e.name,\"address\":e.adds})}},{\"key\":\"getCouponList\",\"value\":function getCouponList(e,t){var n=this,a=localStorage.getItem(\"userId\"),o=e.storesDetails;a&&i.a.request({\"url\":\"heque-coupon/discount_coupon/order_info_get_coupon\",\"method\":\"GET\",\"data\":{\"userId\":a,\"totalPrice\":t,\"dishId\":e.dishId,\"storeId\":o.id},\"success\":function success(e){if(e.data.length>0){var t=e.data.filter(function(e){return 2==e.type});if(t.length>0){t.sort(function(e,t){return t.faceValue-e.faceValue});var a=t[0];Object(m.b)(\"currentCoupon\",a),n.setState({\"currentCoupon\":a});var o=a.faceValue?a.faceValue:0,r=o>0&&\"2\"==a.type?\"- ¥\"+o:\"请选择优惠券\";n.setState({\"couponStr\":r,\"cValue\":o,\"couponStyle\":!0}),n.calculate(a.faceValue)}else n.setState({\"couponStr\":\"请选择优惠券\",\"couponStyle\":!1})}else n.setState({\"couponStr\":\"请选择优惠券\",\"couponStyle\":!1})}})}},{\"key\":\"bookingMeals\",\"value\":function bookingMeals(){var e=this;if(this.canPayClick){this.canPayClick=!1,setTimeout(function(){e.canPayClick=!0},3e3);var t=localStorage.getItem(\"userId\");if(t){var n=this;Object(r.b)({\"title\":\"努力加载中…\"});var a=this.state,s=a.orderInfo,c=a.count,u=(a.priceTotal,this.state.currentPoint),d=Number(c*s.dishPricee);i.a.request({\"url\":\"heque-eat/eat/save_order\",\"method\":\"POST\",\"data\":{\"dishId\":s.dishId,\"storeId\":u.id,\"num\":c,\"userId\":t,\"priceType\":s.priceType,\"longitude\":u.longitude,\"latitude\":u.latitude,\"codeC\":u.cityCode,\"totalPrice\":d,\"appType\":\"h5\"},\"success\":function success(e){var t=e.data;Object(r.a)(),e.code===l.a.NetCode_NoError?n.checkPay(t):Object(r.d)({\"title\":e.message,\"icon\":\"none\",\"duration\":2e3})}})}else o.a.navigateTo({\"url\":\"/pages/login/login?v=\"+(new Date).getTime()})}}},{\"key\":\"toCouponsList\",\"value\":function toCouponsList(e){var t=localStorage.getItem(\"userId\"),n=this.state.currentPoint,a=this.state.orderInfo,r=this.state.count,s=Number(r*a.dishPricee);t?o.a.navigateTo({\"url\":\"/pages/take_meals/select_coupon/select_coupon?userId=\"+t+\"&storeId=\"+n.id+\"&dishId=\"+a.dishId+\"&totalPrice=\"+s+\"&v=\"+(new Date).getTime()}):o.a.navigateTo({\"url\":\"/pages/login/login\"})}},{\"key\":\"checkPay\",\"value\":function checkPay(e){var t={},n=(this.state.currentCoupon||{}).id;n&&(t={\"userCardMedalId\":n});var a=this;i.a.request({\"url\":\"heque-coupon/discount_coupon/query_real_pay_price\",\"method\":\"GET\",\"data\":P({},t,{\"orderId\":e}),\"success\":function success(t){var n=t.data.totalPrice;parseInt(100*parseFloat(n))>parseInt(0)?a.goWechatPay(n,e):a.zeroPay(n,e)},\"error\":function error(t){Object(r.a)(),Object(r.d)({\"title\":\"支付失败\",\"icon\":\"none\",\"duration\":2e3}),o.a.navigateTo({\"url\":\"/pages/my/order_history/the_order_details/the_order_details?orderId=\"+e+\"&=\"+(new Date).getTime()})}})}},{\"key\":\"goWechatPay\",\"value\":function goWechatPay(e,t){var n=this.state.currentCoupon||{},a=localStorage.getItem(\"openId\"),s={},c=n.id;c&&(s={\"userCardMedalId\":c});var u=this;Object(d.a)(s,t,e,a,function(){u.setState({\"count\":1}),o.a.navigateTo({\"url\":\"/pages/my/order_history/the_order_details/the_order_details?orderId=\"+t+\"&v=\"+(new Date).getTime()})},function(){u.setState({\"count\":1}),Object(r.d)({\"title\":\"支付取消\",\"icon\":\"none\",\"duration\":2e3}),o.a.navigateTo({\"url\":\"/pages/my/order_history/the_order_details/the_order_details?orderId=\"+t+\"&v=\"+(new Date).getTime()})},function(){u.setState({\"count\":1}),Object(r.d)({\"title\":\"支付失败\",\"icon\":\"none\",\"duration\":2e3}),o.a.navigateTo({\"url\":\"/pages/my/order_history/the_order_details/the_order_details?orderId=\"+t+\"&v=\"+(new Date).getTime()})})}},{\"key\":\"zeroPay\",\"value\":function zeroPay(e,t){Object(r.b)({\"title\":\"努力加载中…\"});var n={},a=(this.state.currentCoupon||{}).id;a&&(n={\"userCardMedalId\":a}),this.setState({\"count\":1}),Object(d.b)(n,e,t)}}]),Booking}()},\"86\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAaCAMAAABmdEcLAAAAb1BMVEUAAADUybnUybnVyLnVxLvRxbrUyLnUyLnUyLnUyLnUyLnTyrnVyLrWxrzUyLjUyLnUyLjUyLrVybnUyLnTyLnUyLnUyLrUyLnUx7nVyLjRxbjXybvUyLjUyLnUyLjVyLnUyLnVx7nWyLjUybfUyLnz64EUAAAAJHRSTlMA+edNBgvq4tzOZjQaEPTvxb6zrp6VjIJVQi0lILameXhuXVnTdyysAAAAjklEQVQY02XPSQKCMBBE0cyBgCIzAs59/zNquSAN+bt6uxJCK6/FLkUkp6OQfHPRkn6FlF6crmfQM6WRU1GBhh05UM9pVqDOMFo8KD8xWjPQxTIqHahh8gBI9nok9IkwYFdThB7giggdQM3bNneAXyK0gGyNcPtDuYGtAXkE0SZ/JN5wEA1RbQXPhmD4/gKrzhFOYLvxyAAAAABJRU5ErkJggg==\"}}]);","extractedComments":[]}