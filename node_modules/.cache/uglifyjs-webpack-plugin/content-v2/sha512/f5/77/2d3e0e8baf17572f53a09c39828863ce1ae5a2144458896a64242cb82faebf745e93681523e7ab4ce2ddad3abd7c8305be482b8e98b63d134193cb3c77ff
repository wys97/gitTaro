{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{\"137\":function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return switchTab});var o=n(4),r=n(20);function switchTab(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(o.j)(e);if(!t.res){var n={\"errMsg\":\"showTabBarRedDot\"+t.msg};return console.error(n.errMsg),Promise.reject(n)}var i=e.url,a=e.success,s=e.fail,c=e.complete;return new Promise(function(e,t){r.a.eventCenter.trigger(\"__taroSwitchTab\",{\"url\":i,\"successHandler\":function successHandler(t){a&&a(t),c&&c(t),e(t)},\"errorHandler\":function errorHandler(e){s&&s(e),c&&c(e),t(e)}})})}},\"295\":function(e,t,n){},\"297\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAp4AAAA8CAMAAAD440ptAAAAz1BMVEUvLzAAAAAcHCAuLi8vLy8/OjYvLzBHQDpCPTdIQTs6NjA0Ly8vLy86NzRHQDtHQDosLCwvLzBJQTsvLy8tLS8vLy9FPzlGPjkvLy9IQTsuLjBHPzouLi43MzNIQTsvLy8yMC5AQENNTVFBPDgvLi86NzRIQTs/OjcuLjAuLjBJQjstLS9MTFJNTVIvLy8vLzBNTVIuLi9LS1BHR0tEREhJSU1KSk9CQkU/P0I3Nzk1NTczMjM8PD87Oz05OTwxMTIzMzU3NTM0NDZGQDpBPDhJYJooAAAAL3RSTlP2AAPz5hv65yefFA3eOPnzKOrAo52JiFhYUlJKSiDcwh36+ffq58PCwcCSkon2w4xTTmsAAAMXSURBVHja7d1pVxoxFMbxJDPDsIMLO6h1X9oml00FRLbv/5nqVptomdbjsbltn9+7+/LO+RsCngMiEABMBSKlAZhKCaEBmBLIE/hCnsAY8gTGkCcwhjyBMeQJjCFPYAx5AmPIExhDnsCYwP/cga+UyIcbgQbgJtgI83lRLtQrX0OcocBJKtyt1AvljpBS5aL2VqgBuAi32lFOSSmFvKeyzTO8RwIexFkzq+QDIR+p8jauoMBBsF1W8omQ3+1doE/wL7jYk8+EfLa3jdd38E1sd6ST57PyqQbw67Qs1+Spmnj/Dn6FTeXmaclu4fNP8Cm1lZVunrY2jk/wKWzLhDyjXdIAvtBulJRnroIPl8CfoJJLylPVNzSALxt1lZSnLODyCd5QWJCJeabzuHyCL5RPJ+fZechzNhgu9A/jwXBkjbe94bW29LrO2O9O3fHGHi+7E3e8sserl+OlPU7c8abbt8epO153e8447N1a42jYG1vjYjiYWeNsMPio/fsv95+8Z//Ex+Hu303af/TG/d3R3b+XtH9yDvTpy+ffOD0nxlzZi7vj1JhLe3Fj+vam7rgwpmdvaszAXs2YrrZ0X47GHgfGjO3nYMzCHUf2czDm2n4Oxkzd8cbuwBjrMX3g/rNX+w+1xSTuP3y1/+yP7D95x/6jN+6//4u7Jz3+9fxnp+fg7z89p//C6bmfeHqq2iHunuALHdZUUp65aoA8wRcKqrmkPKMTjTzBF6KTKCnP1hHyBG+IjloJeWYzAnmCN0Qik12bp2rEqBM8Ih031Lo805tzQp7gEc0302vyjDIHODzBK9IHmeineUbnpTHqBK+IxqXz6HWeKp0p4aUdfCOalzJp5eapso3N4hwv7eAfzYubDetbQlQuamXiJc5O4IBovowzrafvWEoXatXjuLjCvRN4IBqvivFxtVZId8ROHJeWq7nG2QlMEOn5almK450dUbxrc6wJdQIb9zWO7wpdFoXQhDaBGXokhECdwBDdwy9zAGPIExhDnsAY8gTGkCcwhjyBMeQJjCFPYAw/+QqMpUQgAJgKvgEGf1eIA1NRPQAAAABJRU5ErkJggg==\"},\"298\":function(e,t,n){e.exports=n.p+\"static/images/coupon.f2a3e79f908b71e4bcb816b568bfca74.png\"},\"299\":function(e,t){e.exports=\"data:image/png;base64,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\"},\"375\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",function(){return w});var o=n(0),r=(n(295),n(385)),i=n(137),a=n(1),s=n(8),c=n(87),l=n(88),u=n(5),p=n(10),f=n(297),d=n.n(f),m=n(298),h=n.n(m),g=n(299),y=n.n(g),b=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),v=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if(\"value\"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var w=function(e){function CouponList(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,CouponList);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return t=n=_possibleConstructorReturn(this,(e=CouponList.__proto__||Object.getPrototypeOf(CouponList)).call.apply(e,[this].concat(r))),n.config={\"navigationBarTitleText\":\"优惠券列表\"},n.state={\"couponData\":[],\"applyType\":[{\"type\":1,\"astrict\":\"\"},{\"type\":2,\"astrict\":\"仅限菜品\"},{\"type\":3,\"astrict\":\"仅限商品\"}],\"defaultState\":!1},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(CouponList,a[\"a\"].Component),b(CouponList,[{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=this,t=localStorage.getItem(\"userId\");t&&(Object(r.b)({\"title\":\"努力加载中…\"}),u.a.request({\"url\":\"heque-coupon/discount_coupon/get_discount_coupon\",\"method\":\"GET\",\"data\":{\"userId\":t},\"success\":function success(t){console.log(t),Object(r.a)(),t.code===p.a.NetCode_NoError&&(0===t.data.length?e.setState({\"defaultState\":!0}):e.setState({\"couponData\":t.data,\"defaultState\":!1}))}}))}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this,n=this.state,r=n.couponData,i=n.applyType,a=n.defaultState,u=o.j.createElement(s.a,{\"className\":\"CouponCouponList\"},r.map(function(n,r){return o.j.createElement(s.a,{\"className\":\"couponList_wrap\",\"key\":r},o.j.createElement(s.a,{\"className\":\"couponList_title\"},o.j.createElement(s.a,{\"className\":\"flex_column coupon_priceList\"},o.j.createElement(c.a,{\"className\":\"coupon_price\"},\"￥\",o.j.createElement(c.a,{\"className\":\"font_68\"},n.faceValue)),1===n.useType?\"\":o.j.createElement(c.a,{\"className\":\"coupon_scope\"},\"满\",o.j.createElement(c.a,{\"className\":\"coupon_price_color\"},2===n.useType?n.consumptionMoney:\"\"),\"元可用\")),o.j.createElement(s.a,{\"className\":\"flex_column coupon_nameList\"},o.j.createElement(c.a,{\"className\":\"coupon_name\"},n.name),i.map(function(e){return o.j.createElement(c.a,{\"className\":\"coupon_astrict\"},n.applyType===e.type?e.astrict:\"\")}),o.j.createElement(c.a,{\"className\":\"coupon_time\"},n.receiveTime.substring(0,10),\" / \",n.expireTime.substring(0,10))),o.j.createElement(s.a,{\"className\":\"useBtn\",\"onClick\":1===n.state&&e.goIndex.bind(t,n.state)},o.j.createElement(l.a,{\"src\":y.a,\"className\":\"useBtn_img\"}))),o.j.createElement(l.a,{\"src\":d.a,\"className\":\"coupon_gapLine_img\",\"style\":\"pointer-events: none\"}),o.j.createElement(s.a,{\"className\":\"coupon_shop_astrict\"},null==n.storeInfoName?o.j.createElement(c.a,null,\"不限门店\"):o.j.createElement(c.a,null,\"限 \",n.storeName,\" 使用\")))})),p=o.j.createElement(s.a,{\"className\":\"noCouponData\"},a&&o.j.createElement(l.a,{\"src\":h.a,\"className\":\"noCoupon_img\",\"style\":\"pointer-events: none\"}));return o.j.createElement(s.a,{\"className\":\"CouponList\"},0===r.length?p:u)}},{\"key\":\"goIndex\",\"value\":function goIndex(e,t){Object(i.a)({\"url\":\"/pages/index/index?v=\"+(new Date).getTime()})}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){v(CouponList.prototype.__proto__||Object.getPrototypeOf(CouponList.prototype),\"componentDidShow\",this)&&v(CouponList.prototype.__proto__||Object.getPrototypeOf(CouponList.prototype),\"componentDidShow\",this).call(this)}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){v(CouponList.prototype.__proto__||Object.getPrototypeOf(CouponList.prototype),\"componentDidHide\",this)&&v(CouponList.prototype.__proto__||Object.getPrototypeOf(CouponList.prototype),\"componentDidHide\",this).call(this)}}]),CouponList}()},\"81\":function(e,t,n){var o=n(82);\"string\"==typeof o&&(o=[[e.i,o,\"\"]]);var r={\"sourceMap\":!1,\"insertAt\":\"top\",\"hmr\":!0,\"transform\":void 0,\"insertInto\":void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},\"82\":function(e,t,n){(e.exports=n(16)(!1)).push([e.i,\".taro-text {\\n  -moz-user-select: none;\\n  -webkit-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n\\n.taro-text__selectable {\\n  -moz-user-select: text;\\n  -webkit-user-select: text;\\n  -ms-user-select: text;\\n  user-select: text;\\n}\",\"\"])},\"83\":function(e,t,n){var o=n(84);\"string\"==typeof o&&(o=[[e.i,o,\"\"]]);var r={\"sourceMap\":!1,\"insertAt\":\"top\",\"hmr\":!0,\"transform\":void 0,\"insertInto\":void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},\"84\":function(e,t,n){(e.exports=n(16)(!1)).push([e.i,'img[src=\"\"] {\\n  opacity: 0;\\n}\\n\\n.taro-img {\\n  display: inline-block;\\n  overflow: hidden;\\n  position: relative;\\n  font-size: 0;\\n  width: 320px;\\n  height: 240px;\\n}\\n\\n.taro-img.taro-img__widthfix {\\n  height: 100%;\\n}\\n\\n.taro-img__mode-scaletofill {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.taro-img__mode-aspectfit {\\n  max-width: 100%;\\n  max-height: 100%;\\n}\\n\\n.taro-img__mode-aspectfill {\\n  min-width: 100%;\\n  height: 100%;\\n}\\n\\n.taro-img__mode-widthfix {\\n  width: 100%;\\n}\\n\\n.taro-img__mode-top {\\n  width: 100%;\\n}\\n\\n.taro-img__mode-bottom {\\n  width: 100%;\\n  position: absolute;\\n  bottom: 0;\\n}\\n\\n.taro-img__mode-left {\\n  height: 100%;\\n}\\n\\n.taro-img__mode-right {\\n  position: absolute;\\n  height: 100%;\\n  right: 0;\\n}\\n\\n.taro-img__mode-topright {\\n  position: absolute;\\n  right: 0;\\n}\\n\\n.taro-img__mode-bottomleft {\\n  position: absolute;\\n  bottom: 0;\\n}\\n\\n.taro-img__mode-bottomright {\\n  position: absolute;\\n  right: 0;\\n  bottom: 0;\\n}',\"\"])},\"87\":function(e,t,n){\"use strict\";n(6);var o=n(0),r=n(18),i=n(3),a=n.n(i),s=(n(81),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),c=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var l=function(e){function Text(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Text),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Text.__proto__||Object.getPrototypeOf(Text)).apply(this,arguments))}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Text,o[\"j\"].Component),c(Text,[{\"key\":\"render\",\"value\":function render(){var e=this.props,t=e.className,n=e.selectable,i=void 0!==n&&n,c=a()(\"taro-text\",{\"taro-text__selectable\":i},t);return o.j.createElement(\"span\",s({},Object(r.a)(this.props,[\"selectable\",\"className\"]),{\"className\":c}),this.props.children)}}]),Text}();t.a=l},\"88\":function(e,t,n){\"use strict\";n(6);var o=n(0),r=n(3),i=n.n(r),a=(n(83),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),s=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var c=function(e){function Image(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Image);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Image.__proto__||Object.getPrototypeOf(Image)).apply(this,arguments));return e.state={\"isLoaded\":!1},e.imageOnLoad=e.imageOnLoad.bind(e),e._handleScroll=e._handleScroll.bind(e),e.handleScroll=e.throttle(e._handleScroll,100),e}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Image,o[\"j\"].Component),s(Image,[{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){this.props.lazyLoad&&(window.addEventListener(\"scroll\",this.handleScroll),window.addEventListener(\"resize\",this.handleScroll),this._handleScroll())}},{\"key\":\"componentWillUnMount\",\"value\":function componentWillUnMount(){this.props.lazyLoad&&(window.removeEventListener(\"scroll\",this.handleScroll),window.removeEventListener(\"resize\",this.handleScroll))}},{\"key\":\"getClientHeight\",\"value\":function getClientHeight(){return document.body.clientHeight&&document.documentElement.clientHeight?Math.min(document.body.clientHeight,document.documentElement.clientHeight):Math.max(document.body.clientHeight,document.documentElement.clientHeight)}},{\"key\":\"getScrollTop\",\"value\":function getScrollTop(){return document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body?document.body.scrollTop:window.scrollY||window.pageYOffset}},{\"key\":\"throttle\",\"value\":function throttle(e,t){var n=null;return function(){var o=this,r=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(o,r)},t)}}},{\"key\":\"_handleScroll\",\"value\":function _handleScroll(){var e=this,t=this.props.offset,n=void 0===t?0:t,r=this.getNodeTop(),i=r.nodeTop,a=r.nodeBottom,s=this.getScrollTop(),c=s+this.getClientHeight();a+n>=s&&i-n<=c&&(this.setState({\"isLoaded\":!0},function(){o.j.findDOMNode(e).children[0].src=e.props.src}),window.removeEventListener(\"scroll\",this.handleScroll),window.removeEventListener(\"resize\",this.handleScroll))}},{\"key\":\"getNodeTop\",\"value\":function getNodeTop(){var e=this.getScrollTop(),t=o.j.findDOMNode(this),n=t.getBoundingClientRect().top+e;return{\"nodeTop\":n,\"nodeBottom\":n+t.offsetHeight}}},{\"key\":\"imageOnLoad\",\"value\":function imageOnLoad(e){var t=this.props.onLoad;Object.defineProperty(e,\"detail\",{\"enumerable\":!0,\"value\":{\"width\":this.imgRef.width,\"height\":this.imgRef.height}}),t&&t(e)}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this.props,n=t.className,r=t.src,s=t.style,c=t.mode,l=t.onError,u=t.lazyLoad,p=function _objectWithoutProperties(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,[\"className\",\"src\",\"style\",\"mode\",\"onError\",\"lazyLoad\"]),f=i()(\"taro-img\",{\"taro-img__widthfix\":\"widthFix\"===c},n),d=i()(\"taro-img__mode-\"+(c||\"scaleToFill\").toLowerCase().replace(/\\s/g,\"\")),m=r;u&&(m=this.state.isLoaded?r:\"\");return o.j.createElement(\"div\",a({\"className\":f,\"style\":s},p),u?o.j.createElement(\"img\",{\"ref\":function ref(t){return e.imgRef=t},\"className\":d,\"data-src\":m,\"onLoad\":this.imageOnLoad,\"onError\":l}):o.j.createElement(\"img\",{\"ref\":function ref(t){return e.imgRef=t},\"className\":d,\"src\":m,\"onLoad\":this.imageOnLoad,\"onError\":l}))}}]),Image}();t.a=c}}]);","extractedComments":[]}