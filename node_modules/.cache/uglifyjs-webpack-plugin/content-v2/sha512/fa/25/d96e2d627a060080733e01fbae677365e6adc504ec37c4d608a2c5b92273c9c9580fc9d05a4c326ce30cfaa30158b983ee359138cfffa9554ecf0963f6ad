{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{\"276\":function(e,t,r){},\"278\":function(e,t,r){e.exports=r.p+\"static/images/noOrder.d2305dbd275502878c8931fa2d6282b3.png\"},\"279\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAA2CAMAAAB3LmJBAAAAflBMVEUAAACMhoGLh4KLh4OKh4GLh4KLh4KLh4KKhoKJgn+LhoKLh4KKh4KLh4GLh4KHh32KhoGLhoGLh4KKh4KHh4CKh4GLh4KLhoONhYWLhoKKh4GJhoGLh4KKh4GLhoKKh4GLh4KLh4KLh4GLh4KLh4OLhYKKhIKKh4OKhoKLh4ITrC4pAAAAKXRSTlMAXaF/3bzy4jsKb/tpxJwRJkDoSCKM0lEapVU0zpFhd/a0rtinLiA3hB7YkPoAAARFSURBVGje1ZqLeqIwEEYHCIlcFa2KKPVW2/7v/4LrkCCsSOq23UrP97VRo+ZIJpMQoFuswzQRMsKPEUmRpOGa7mLmTvEgpmn2kV0QCwDKjbPXgH6Q4DWLXQVAxNZ2nxUgvAk9iIknAPXcX58AmyU9lOUGSHqOkCMxdejhOFPImxpz4GVMA2D8AsypwwpRTAMhjrDq+skZDYZMXhvOIUc0IN7k373sIBrQ8WOyCE4rv0gMJv5qYsgm2yR4ocHxguQyf2D6qPwytlRNYeaUQOHf83OxbA8xIXL+IjKE9oA+pUcjlu/8/rc6UIHp7c2teg9tnq78Ij3Kli7/d3V9udDWIaKQPbwrmvDCQT96BwrqZYOwKgWWHwuWf7cTRoA/pi0wvwjmO/hkKvllB1dQjQvde4HEwjYvQ3Ax00WHzFsAZx9dXLfzpoBjHiwQvdWCKyC75FnMLYKB0GIeYA0GUVW78HrqXeBSdNrJN8CeThGORnDGzw0ThehEhhHaMb71zygkXEjsuNj2CXrgCJpicofg2LRSYlofhuSYV0uMQgtuIHNqDAu6Leiig9u7/uPG1hB0hyBJvPOTfZOdAvYZHzJzBAOv0eAR3S/oMwtg4TMWQRJYU4jUIqj7AzykdDJX+u3hJtdx7DAJEDpMa6xbBE0SMa/aBFOE57/YItiE3aGK6zEQVqkdaqR/Ygvd5Nxl4m8RjJFSgswiyG0JoEpuCHjIY8See0AWNwXNS+63dHGGhBRe74rBUZUSSuyCev0dFWyjnmpCLeILISKb4BU2wVcokgjuEgyqFdoCvqkMq84WrSHmNCLCKugxB+DgMTbBAJIi0F2CdMCRJsD2ktDCykSNat47gl+OQUJkBD+OQSoAdmiSZmeQ/B9BexcbzMTpqvbcOQs+J9jB3sU8SD7Og0wKoJWT1pguLTH4bYPEnmZaBZ0AyHErieLpE4IjR5MCqXk4sqYZe6I2hZ7W9kDZLHh32LOJ9GoOV4LBLcHOz2GsiTpE+rHgXnrVGpydmjRTWGNw7XcFM49ppxlD1j/V2RcLb3GZ7HDmLHjg8pkMCqoy2fk1i78ElxJ5R9BDD17vYqF/ueW4CjXqZcSr54WCfDK1nBEtiZo/O/qq4ARTy4K1RMUuEYBOg/I0A446tI6Q435ByR90vhyDHlzLkn8GtS+fTyYUi6j6wjmQBPrrS7oS3F4W8DEAsSbD8tOCAjNdLK3nrCy4hZnkEmAf8AHc5W3BUggBYH1RWulPp+fYnAKFVdB+0tScdtoGswe8E5MLpNU5R0ltQQfMggx+0Yx1nT3tgvbTTvuJu+niMqwDV6fgQg/Rlb/S3u6Zbddj7Z9JT2QRtJ64P3zrg+xbH79l82j422+D38CstoDfaEDwFnBnEz2jwcCb6L/tMgT3MlaDyDbjFTD/jZfChn8xcfiXY88E4aMvaIfB774loLmpQv3sTRWq76aKP/3v+XL4YhyLAAAAAElFTkSuQmCC\"},\"372\":function(e,t,r){\"use strict\";r.r(t),r.d(t,\"default\",function(){return j});var o=r(0),a=r(1),n=r(34),s=r(373),i=r(386),c=r(8),l=r(86),u=r(88),d=r(374),h=(r(276),r(5)),m=r(278),p=r.n(m),f=r(279),y=r.n(f),g=r(85),O=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),b=function get(e,t,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,r)}if(\"value\"in o)return o.value;var n=o.get;return void 0!==n?n.call(r):void 0};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var j=function(e){function OrderHistory(){var e,t,r;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,OrderHistory);for(var o=arguments.length,a=Array(o),n=0;n<o;n++)a[n]=arguments[n];return t=r=_possibleConstructorReturn(this,(e=OrderHistory.__proto__||Object.getPrototypeOf(OrderHistory)).call.apply(e,[this].concat(a))),r.config={\"navigationBarTitleText\":\"历史订单\",\"enablePullDownRefresh\":!0},r.state={\"orderHistoryList\":[],\"status\":[{\"id\":1,\"state\":\"待支付\"},{\"id\":2,\"state\":\"支付失败\"},{\"id\":3,\"state\":\"已支付\"},{\"id\":4,\"state\":\"已取消\"},{\"id\":5,\"state\":\"退款处理中\"},{\"id\":6,\"state\":\"退款申请失败\"},{\"id\":7,\"state\":\"退款成功\"},{\"id\":8,\"state\":\"拒绝退款\"},{\"id\":9,\"state\":\"取消退款\"}],\"pagenum\":1,\"onshow\":0,\"noHistory\":!1,\"noMoreData\":!1},_possibleConstructorReturn(r,t)}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(OrderHistory,a[\"a\"].Component),O(OrderHistory,[{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){this.getOrderHistoryList(1)}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){(Object(g.a)(\"orderStateChanged\")||!1)&&(Object(g.b)(\"orderStateChanged\",!1),a.a.redirectTo({\"url\":\"/pages/my/order_history/order_history\"})),this._offReachBottom=Object(n.a)({\"callback\":this.onReachBottom,\"ctx\":this,\"onReachBottomDistance\":void 0}),this.pullDownRefreshRef&&this.pullDownRefreshRef.bindEvent()}},{\"key\":\"onPullDownRefresh\",\"value\":function onPullDownRefresh(){Object(s.a)()}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this,r=this.state,a=r.orderHistoryList,n=r.status,s=r.onshow,i=r.noHistory,h=a.map(function(r){return o.j.createElement(c.a,{\"key\":r.id},o.j.createElement(c.a,{\"className\":\"orderList\",\"onClick\":function onClick(){e.theOrderDetails(r.id,r.state)}},o.j.createElement(c.a,{\"className\":\"tradeMessage\"},o.j.createElement(l.a,{\"className\":\"tradeName\"},r.storeName),n.map(function(e){return o.j.createElement(c.a,{\"key\":e.id,\"className\":r.state==Number(e.id)?\"state_of_payment\":\"displayNone\"},r.state==Number(e.id)?o.j.createElement(l.a,null,e.state):\"\")})),o.j.createElement(c.a,{\"className\":1==r.state?\"merchandise_news\":\"merchandise_news_state_4\"},o.j.createElement(c.a,{\"className\":\"merchandise_left\"},o.j.createElement(u.a,{\"src\":r.dishesUrl,\"className\":\"greensImg\"}),o.j.createElement(c.a,{\"className\":\"message\"},o.j.createElement(c.a,{\"className\":\"dish_name\"},r.dishesName),o.j.createElement(c.a,{\"className\":\"number\"},\"共\",r.orderNum,\"件商品\"),o.j.createElement(c.a,{\"className\":\"Time\"},\"下单时间 : \",r.createTime))),o.j.createElement(c.a,{\"className\":\"price\"},\"¥\",r.paymentPrice)),1==r.state&&o.j.createElement(c.a,{\"className\":\"orderList_buttom\"},o.j.createElement(c.a,{\"className\":\"orderList_btn\",\"onClick\":t.cancelOrder.bind(e,r.id)},o.j.createElement(u.a,{\"src\":y.a,\"className\":\"orderList_btn_img\",\"style\":\"pointer-events: none\"})))))}),m=o.j.createElement(c.a,{\"className\":\"order_history\"},h,i?o.j.createElement(c.a,{\"className\":\"noHistory\"},o.j.createElement(u.a,{\"className\":\"noHistory_color\",\"src\":p.a,\"style\":\"pointer-events: none\"})):o.j.createElement(c.a,{\"className\":\"Loadedtip\"},1==s&&o.j.createElement(l.a,null,\"拼命加载中...\"),2==s&&o.j.createElement(l.a,null,\" 没有更多订单了...\")));return o.j.createElement(d.a,{\"onRefresh\":this.onPullDownRefresh&&this.onPullDownRefresh.bind(this),\"ref\":function ref(t){t&&(e.pullDownRefreshRef=t)}},m)}},{\"key\":\"onReachBottom\",\"value\":function onReachBottom(){var e=this.state.pagenum+1;this.setState({\"pagenum\":e}),this.getOrderHistoryList(e)}},{\"key\":\"getOrderHistoryList\",\"value\":function getOrderHistoryList(e){var t=this,r=localStorage.getItem(\"userId\");t.state.noMoreData||(Object(i.b)({\"title\":\"努力加载中...\"}),h.a.request({\"url\":\"heque-eat/eat/get_order_info_list\",\"method\":\"GET\",\"data\":{\"userId\":r,\"page\":e,\"pageSize\":20},\"success\":function success(e){var r=e.data.data;if(0==r.length&&1==t.state.pagenum?t.setState({\"onshow\":0,\"noHistory\":!0}):t.setState({\"noHistory\":!1,\"onshow\":1}),1==t.state.pagenum)t.setState({\"orderHistoryList\":r});else{var o=t.state.orderHistoryList;t.setState({\"orderHistoryList\":o.concat(r),\"onshow\":1})}r.length<20&&t.setState({\"onshow\":2,\"noMoreData\":!0}),Object(i.a)()}}))}},{\"key\":\"cancelOrder\",\"value\":function cancelOrder(e,t){var r=localStorage.getItem(\"userId\"),o=this;t.stopPropagation(),Object(i.c)({\"content\":\"确定取消订单？\",\"success\":function success(t){t.confirm&&(Object(i.b)({\"title\":\"努力加载中…\"}),h.a.request({\"url\":\"heque-eat/eat/delete_order\",\"method\":\"GET\",\"data\":{\"id\":e},\"success\":function success(e){Object(i.a)(),h.a.request({\"url\":\"heque-eat/eat/get_order_info_list\",\"method\":\"GET\",\"data\":{\"userId\":r,\"page\":1,\"pageSize\":20},\"success\":function success(e){var t=e.data.data;o.setState({\"orderHistoryList\":t,\"onshow\":!0}),0!==t.length&&t!==[]||o.setState({\"onshow\":!1})}})}}))}})}},{\"key\":\"theOrderDetails\",\"value\":function theOrderDetails(e,t){var r=e;localStorage.setItem(\"orderState\",t),a.a.navigateTo({\"url\":\"/pages/my/order_history/the_order_details/the_order_details?orderId=\"+r+\"&v=\"+(new Date).getTime()})}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){b(OrderHistory.prototype.__proto__||Object.getPrototypeOf(OrderHistory.prototype),\"componentDidHide\",this)&&b(OrderHistory.prototype.__proto__||Object.getPrototypeOf(OrderHistory.prototype),\"componentDidHide\",this).call(this),this._offReachBottom&&this._offReachBottom(),this.pullDownRefreshRef&&this.pullDownRefreshRef.unbindEvent()}}]),OrderHistory}()},\"85\":function(e,t,r){\"use strict\";r.d(t,\"b\",function(){return setGlobalData}),r.d(t,\"a\",function(){return getGlobalData});var o={};function setGlobalData(e,t){o[e]=t}function getGlobalData(e){return o[e]}}}]);","extractedComments":[]}