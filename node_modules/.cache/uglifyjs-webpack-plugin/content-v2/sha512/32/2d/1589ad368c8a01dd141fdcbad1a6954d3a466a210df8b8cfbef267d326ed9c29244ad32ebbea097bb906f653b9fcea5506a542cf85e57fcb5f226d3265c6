{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{\"161\":function(e,t,n){},\"163\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAAA4CAMAAAAYReBvAAAAjVBMVEUAAAA0NDc0NDcwMDA0NDg1NTc1NTg1NTc1NTc1NTg0NDc0NDc1NTc0NDgzMzYzMzcyMjg1NTU0NDYqKio1NTcqKio0NDgnJzs1NTiLh4JDQkN3c3BWVFRgXl1MSktua2iCfnmGgn46OTxRT1B+endoZmR5dnJHRkc/PkByb2xDQ0ReXFtZV1d1cm5cWllag7gSAAAAGHRSTlMA9OII7If8z8atoZxzVk87KR0XBoYN5Q0jMuPMAAADJElEQVRYw82Z6XaqMBRGgTqPbbX2fDImgOD4/o93A0FEK0TxtrDXUhl+ZJtzcgiJdo/FfDIaGHqPfoGebgxGk/lCe4i36VCnX0cfTt+UKp/LDv0RneVnpcpXV6c/RO9+lbvMDPpjjFlZsoypAcZ3U+ejT43Q//jp8m5QQxjvP1w61BidG5sPgxrEuIrUW58apV/M4jE1zLhQX6hxZnndNahxVudavKT6cFIQcXqIZfZs1Kk2O2bLxnzTtO66AB49gv6p7BjbvENYuA8cKcECbLpinRIC7jqDKummw7qq3Lm4g0k5HmCVyHi4pdqmkwzvKdWX8QHGX5eRTIXMkJ7CKcqYQEilMswqsFHKDMV8V68rIzsmPrgJoq3ATXFyGW9dYKuU0RfanCqJHSculQkA+0ckrbphork2oUps0V6ZzB7A7j/KTLRRbZmIpQ3EIgYWUvZrAb+EySlwVMuMtEFdGR5c/q2LjbiMDaXUlRlohlImcIsczzJb5DIxYych7SF6ZWiToekKmdI6w8C8rAEbW0vIiJ+XZHStV1fGhW/KBjiDn8jEgHMVJirgqmV6D8iEzg0yGP6eMpkQAVlylAcvFD0hoz+ZwEWkzI7hJGUi8fVSmIyXZTZgPJVJkzp6JYEHNWR4UcYG9pTJ7AAvJsk6wzmcj0g5tEfPy6zZ1s9lfNE+P8tQCGy4VBEfy3LI985ZvbeVRW/yvEwEHM8yFhMfymW4J2xkFWI7cc0lB+KIBBvAVz0O5s/L+ECYywBbymXye5yBUSpDh6Tr4pis5FfxoFzoT8ucgFMeppDFRRkKAy5P3UyGXJjxAWbkilPFFEIbqmRcKiI73MlluENXMnydTS6csww/pLnkxyy5WM5QMe1MG0FgXuEB4IWhXZS5nAXpt7lOiTwgokN6tZSpYkKeBv8OW6qWCdOs9lGAJf212Skm5FqXqog2uIWFXCFDviknGRf2RFRZabq1X+JUMhJu2RknmSzqlzjRNS2gq0m+VtQ4q+82Lom0a7GoXctorVpgbNfSa7sWpdu1XN+ujYxGtnhWM62U7xZtfrVrW7BlG6aNbiX/AxJwrxnVwvzXAAAAAElFTkSuQmCC\"},\"164\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAAgCAMAAACb6vDZAAAAgVBMVEUAAAD/Ujz/Uj3/UT7/UD//UD7/UT//UD//UD//UT7/UT7/UD7/Sjr/QED/UT//UD7/UT7/Szz/Tz7/UT//Tzz/TT3/UD7/UT7/UD//UT3/UT//UD//UT7/UT7/UD7/UT7/UD3/UT3/UD7/UDz/UDz/QED/UT7/UT7/UD7/Tz3/UT+jL8o7AAAAKnRSTlMAIjvdvH+hXdhR9vELBPrnwhAdVTcW4YVsP9Cxqp2LdE0uyzMoCJF7ZEZhPZ6DAAABtUlEQVQ4y6XV13KrMBSF4SVEF9VgjE13937/BzwikMgOHOLyXXDFz6xhGAGg1V16ldBbSBvb8fAqz7E3gGPHeEdsO4gcvMeJ4Hpvtp4LwjL/17NP2xUGdNda+oNmSEubobdih611KfcBVTOtQWdDIRNfrkGoQeLUc3dlfphtGZTvFjch+pjvLO0wzp1rM678tNBEeJKtjtF821iKatFq+LvdMqVvlb/be5PW5T/SSRuzB2v0Vpq06luhSyFF8tqpdrxn6jiOMQCEBSST2HSzQTPMr2cmfetT9d82ZgklTMqy37NZ33bUzLUjjYbvhyPVBjFUa9FtsR1wcBpod21F8WKba1LIcQxqOdigo2r9MMJTm1HYPrDbQbUW5XhqMzq64EqWak+2iJfbjSWFssU5aMTOx2BLNeoGz2wOrRX8PbkdBklAQQJ/odWMigo94kQUpEgEUblG7xbYaRlcxpNnzfxpm1DI9cI0rmHmpzrxtCZ3I+t1Jhh8k4J9YX7TK9U+4Pxku7UHpHtygIPIIW3POucZjcyxFd5jm+c4rseXBKlbOGM/ONs/+ad89C8D2silV7lRC/wDghpCPMr+sAsAAAAASUVORK5CYII=\"},\"165\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAAA4CAMAAAAYReBvAAACYVBMVEXdqmYAAADft4Dft4DftH7fuIHft3/ft37es3fZrmzdrXTeuIHfuIHeuIDctHj+0aXft4DbsnfirHTZpGDet4DftX3cs3nft4Det4Dftn/+0aXfuIHet4DfuICzeUPftn7ftn72x5a7gkr1yJKzdjn3wY3euIHft4DeuIDft3/dtn7esXbbr3XerXO7g06xdkCzeUOxdkDet4D9z6K1eUT8z6Let4D9z6L8zqH8z6Let3/et3/etn78z6H2yJrftXz8zJ6+h0/wwozft4Dftn7zxJb6zJ/2xpi3fkn6zJ+1fEWxdkG0ekS5gEr2yZv+0KS2e0eyeELft4C1e0XfuIC0e0W6gUyzd0Let4D90KT5zJ63fEexdkHft361ekS6gUuzeUHftX73ypvetX77zp+1fET8z6GzekTdtH71yJW7g0v6y561fET2x5a9hUzftXm2eUPEjU63d0TKlVb6y5u2eUTMmFf/z5/zzJmfgECxdibfuIDet4DetoDdtHrds3q7g07+0aX5zJ+7g07/0qb0xZf8z6L7zaCyeEL5y57zxpi7gk38zqG0e0X3yZvftoD/0qX1x5mwd0Cze0X1xpe4fUjetn69hE/ds37GjlXfuIGxd0HuvpDquovFjlvCi1e+h1L+0qXwwZPouIjmtYbks4Pgr37bp3fWo3HUoG7Nl2XLlWLJk1+9hE/8z6L6zJ/2yJq3fkmzeEP90KPyw5XsvI3eq3vcqnjYpHPSnmzRnWrQm2jPmmfHkF3AiVS0ekX4ypz0xpe5gEu2fEbxw5TjsYHisIDgrX3frHzZpnTEjFjYKEzqAAAAmnRSTlMPAL+nR9+HZy8SGvv32zP+xysXEbNQO9+rl/Xv48/Pd2BERB8LB/Pn049bJyMf/v738evm5c7LxrOei4N7dnY/Kysqolf+9vT07Ozk3dTT0sjGt7Wvr6Cem4iIiIh/d3Vxb25rWFhRUUtJST09OTk3KiAeGhgYFw0KCAbXu5NLQ/Tt5uPi4t3d1cvHx7y8r6+jo6OenXdzbkMtMAhvhQAABVxJREFUWMPE0/dX01AUwPFL2rRNoa21MkSGLKUIArIdCIh7H/cW954gw4F773HUG1fZsy1l7+X+q7wFWkCa4JHRzy95yUnO+ea+88DFgbxT+7Y+unV9bnX1F9LR8Zn8/kTa26uqqiorKysqKtraWltbWpqby8vLy8rKmpp+lZaWNjY2NPz8UVJS8v1bcXFxUVFRYWHhR1Jf/4EUFBR8ratbuvzOwxfJJ0NcHBgZk3t4y4qenp65lDIhMd3d3WazefnTQyGjxmTtWlVTU7N269sT7y/qYAJwyrTjB16vM5u7Vu7MFI0J3rWCSvalwoRLS17X1bVsZ7ZwzNHY3t5NgTBJAhJNpptHBGKCX3X2bgiESRTwwGRKynEUc8GvM+qNDiaVLnmZKS5oZMy52M41Z2DSnb5njEn5O+bcqs4N58EJghKMK1OGx1yItTy5BE4x9bExJmhoTLCfZaOTWqgmwRiXMyRmm2XNeXCaoLvGpMGYo5aoM+BEp71rj9higldb9oJTLaqNyR6I2c376WAChCvmwL/RxdXu6I/JiooMhFH5s6w/CPBiGHBAglMUCoVSK7OLAAEBtd6ZFGMdzCYYnQxRBgJYRMcxVnIp2ilASKJmhzUmN5oPHHuM3E4KVkrGK12CbizLhuWzfXwQ3SJASIDmRgjFHOb9YOwxgyRgtRAxY1r/NkG6Vz4AtxlxPghbrzlEMVt4saPkxQzwRPS0ra+OGqOehTbyiHmIzMxpiL5TxQ6UJtEF8qIjU0EYiw4wI1+S2qkBQKtCnMIQRHQHKYUQlejZStN4h8Ap/j6MQwwME480x2OgpRg9wJw9s5EwahCz3nAS9vPbAMb7NC121dM0Ns+gb8Kl0sV0VdE2u+rF9inJsAhe8vv/O0aOI7DQ5yyoL9PdvDCFikIW+Mo55XSklQIEHTA8h438ifGPcZ8eijSJ7REzZyBxW8hZH/qgSmQ0xw0JsJpPHUuMJzOULSaDCmbrteorFHIww41GIqeccOYYCEsx3IZo/iIIypDY0a+GSuzCbDHDA20x3DP9Nc5D4ooY7+HhrqZI9JEpQJTS4A2RvA4ESVCATDSGaP19rdM5yC1BfAfpoUjiF+RzIIgzaP4wX+24CQNR0GIdDKxBdmQbLLCgAgKkoaCASCnICVCKNFQ0dBwAyBXSoWhOm7e7AkMsHhZSpEzD2q/wsO838zdkDgkUZCBEAGyFEC1oeCwZPk0126ADYGWfwefJrAE0cYnxUwvym01TvgL+gBl0z/F7vtbev4c2IM5HEUXCFV/AuVp7IwFb3WQfaOciQ7CBujihm0aY1s4z9DygoQ8dQL6m78NCBo2UzBWazNDLsw7aQNc/5aueipKokpk86ZtMmsrU2/w6YBZlumiAw7HKqmefeOw1l1Tkg0+iFXsOHT18XE9TQ859flEaCcHB7wG7C2Ydy2AJzK1I1/YGSIiSS8GUTAZehZcQvLgi1KpAfaSPpWjtzOhxbB79JiTdfA8ubZwEqGl9N/ZTMkFJYQpM7NKX4sKLq5uyU286TxS8hy5OMFW6AOb0EwCUp5kWlWUPCCyDN0CUo05sW3PAnQA7zYWXnbwgD/AbLa3eTFkPjdot6jz11T26wMDkc0xxF5pj2wWhuhDFESfIeatiPgX5sC0sxL7oDOzaSO+ImaoYiRfd32Yg9owRmeogoeJCQSZqMA3jpvkjnFW5beIqWVfot95MUQi99oZJrO4iFs6z6rBJeJTy/eDJiR6PnRdOF1U35kzcffa2bN0H3t7+R+P/05wdCAAAAAAI8rce4zSKIhELiyxGo4DRolcLpS2utyLDKh4sv6wWxMJ0reQABO1A0Vrf1EsAAAAASUVORK5CYII=\"},\"350\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",function(){return v});var o=n(0),i=(n(161),n(386)),r=n(1),a=n(8),l=n(97),c=n(91),s=n(5),u=n(83),m=n(84),d=n.n(m),p=n(163),g=n.n(p),f=n(164),h=n.n(f),y=n(165),A=n.n(y),b=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var v=function(e){function Points(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Points);for(var o=arguments.length,i=Array(o),r=0;r<o;r++)i[r]=arguments[r];return t=n=_possibleConstructorReturn(this,(e=Points.__proto__||Object.getPrototypeOf(Points)).call.apply(e,[this].concat(i))),n.config={\"navigationBarTitleText\":\"选择取餐点\"},n.state={\"cityCode\":0,\"city\":\"\",\"pointList\":[]},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Points,r[\"a\"].Component),b(Points,[{\"key\":\"componentWillMount\",\"value\":function componentWillMount(){var e=localStorage.getItem(\"cityCode\"),t=localStorage.getItem(\"city\");this.setState({\"cityCode\":e,\"city\":t});var n=localStorage.getItem(\"latitude\"),o=localStorage.getItem(\"longitude\");this.getCityPoints(e,n,o)}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){var e=localStorage.getItem(\"cityCode\"),t=localStorage.getItem(\"city\");this.setState({\"cityCode\":e,\"city\":t});var n=localStorage.getItem(\"latitude\"),o=localStorage.getItem(\"longitude\");this.getCityPoints(e,n,o)}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"getCityPoints\",\"value\":function getCityPoints(e,t,n){var o=this;s.a.request({\"url\":\"heque-eat/eat/storeList\",\"method\":\"POST\",\"data\":{\"cityCode\":e,\"longitude\":n,\"latitude\":t},\"success\":function success(e){var t=e.data;t.length<=0&&Object(i.d)({\"title\":\"暂无符合条件的取餐点\",\"icon\":\"none\",\"duration\":2e3}),t.sort(function(e,t){return e.number-t.number});var n=!0,r=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value,u=s.foodTime1,m=s.foodTime2,d=s.foodTime3,p=s.foodTime4;s.suppleTime1=u?u.slice(0,5)+\"-\"+u.slice(11,16):\"\",s.suppleTime2=m?\"/ \"+m.slice(0,5)+\"-\"+m.slice(11,16):\"\",s.suppleTime3=d?\"/ \"+d.slice(0,5)+\"-\"+d.slice(11,16):\"\",s.suppleTime4=p?\"/ \"+p.slice(0,5)+\"-\"+p.slice(11,16):\"\"}}catch(e){r=!0,a=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw a}}o.setState({\"pointList\":t})},\"error\":function error(e){}})}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this.state,n=t.pointList,i=t.city,r=n.map(function(t,n){return o.j.createElement(a.a,{\"className\":\"Points_item\",\"key\":t.id},o.j.createElement(a.a,{\"className\":\"Points-conent_wrap\"},o.j.createElement(a.a,{\"className\":\"Points-conent_left\"},o.j.createElement(a.a,{\"className\":\"Points-view_name\"},o.j.createElement(l.a,null,t.name),0===n&&o.j.createElement(c.a,{\"src\":h.a,\"className\":\"Points-nearest\"})),o.j.createElement(a.a,{\"className\":\"Points-distance\"},t.number>=1e3?o.j.createElement(l.a,null,o.j.createElement(l.a,{\"className\":\"Points-distance_number\"},(t.number/1e3).toFixed(1)),\"km\"):o.j.createElement(l.a,null,o.j.createElement(l.a,{\"className\":\"Points-distance_number\"},t.number),\"m\")),o.j.createElement(a.a,{\"className\":\"Points-address\"},t.adds),o.j.createElement(a.a,{\"className\":\"Points-point-time\"},o.j.createElement(l.a,{\"className\":\"Points-time-title\"},\"供餐时间 :\"),o.j.createElement(l.a,{\"className\":\"Points-time\"},t.suppleTime1,\" \",t.suppleTime2,\" \",t.suppleTime3,\" \",t.suppleTime4))),o.j.createElement(a.a,{\"className\":\"Points-conent_right\"},t.state&&o.j.createElement(a.a,{\"className\":\"Points-order-btn\",\"onClick\":e.toOrder.bind(e,t)},o.j.createElement(c.a,{\"src\":A.a,\"className\":\"Points-OrderImgBtn-btn\"})),!t.state&&o.j.createElement(a.a,{\"className\":\"Points-breathingSpace-btn\"},o.j.createElement(c.a,{\"src\":g.a,\"className\":\"Points-breathingSpace-btn\"})))))});return o.j.createElement(a.a,{\"className\":\"default_points\"},o.j.createElement(a.a,{\"className\":\"Points_points-header\"},o.j.createElement(a.a,{\"className\":\"Points_ph-city\",\"onClick\":this.goCitys},o.j.createElement(l.a,null,i),o.j.createElement(c.a,{\"className\":\"Points-arrow-right\",\"src\":d.a}))),o.j.createElement(a.a,{\"className\":\"points-list\"},r))}},{\"key\":\"goBack\",\"value\":function goBack(){r.a.navigateBack()}},{\"key\":\"toOrder\",\"value\":function toOrder(e,t){var n=Object(u.a)(\"currentPoint\");if(!n||n.id!=e.id){Object(u.b)(\"currentPoint\",e),Object(u.b)(\"pointChanged\",!0);var o=this.state,i=o.cityCode,a=o.city;Object(u.b)(\"cityCode\",i),Object(u.b)(\"city\",a)}var l=JSON.stringify(e);null!==this.getUrlParam(\"pid\")?(Object(u.b)(\"currentPoint\",e),Object(u.b)(\"pointChanged\",!0),r.a.redirectTo({\"url\":\"/pages/index/index?storesDetails=\"+l+\"&v=\"+(new Date).getTime()})):r.a.redirectTo({\"url\":\"/pages/home_components/package_or_buy/package_or_buy?storesDetails=\"+l+\"&v=\"+(new Date).getTime()})}},{\"key\":\"goCitys\",\"value\":function goCitys(e){r.a.navigateTo({\"url\":\"/pages/points/citys/citys?v=\"+(new Date).getTime()})}},{\"key\":\"getUrlParam\",\"value\":function getUrlParam(e){var t=new RegExp(\"(^|&)\"+e+\"=([^&]*)(&|$)\"),n=window.location.href.split(\"#\")[0].split(\"?\")[1];if(n){var o=n.substr(0).match(t);return null!==o?unescape(o[2]):null}return null}}]),Points}()},\"81\":function(e,t,n){var o=n(82);\"string\"==typeof o&&(o=[[e.i,o,\"\"]]);var i={\"sourceMap\":!1,\"insertAt\":\"top\",\"hmr\":!0,\"transform\":void 0,\"insertInto\":void 0};n(17)(o,i);o.locals&&(e.exports=o.locals)},\"82\":function(e,t,n){(e.exports=n(16)(!1)).push([e.i,'img[src=\"\"] {\\n  opacity: 0;\\n}\\n\\n.taro-img {\\n  display: inline-block;\\n  overflow: hidden;\\n  position: relative;\\n  font-size: 0;\\n  width: 320px;\\n  height: 240px;\\n}\\n\\n.taro-img.taro-img__widthfix {\\n  height: 100%;\\n}\\n\\n.taro-img__mode-scaletofill {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.taro-img__mode-aspectfit {\\n  max-width: 100%;\\n  max-height: 100%;\\n}\\n\\n.taro-img__mode-aspectfill {\\n  min-width: 100%;\\n  height: 100%;\\n}\\n\\n.taro-img__mode-widthfix {\\n  width: 100%;\\n}\\n\\n.taro-img__mode-top {\\n  width: 100%;\\n}\\n\\n.taro-img__mode-bottom {\\n  width: 100%;\\n  position: absolute;\\n  bottom: 0;\\n}\\n\\n.taro-img__mode-left {\\n  height: 100%;\\n}\\n\\n.taro-img__mode-right {\\n  position: absolute;\\n  height: 100%;\\n  right: 0;\\n}\\n\\n.taro-img__mode-topright {\\n  position: absolute;\\n  right: 0;\\n}\\n\\n.taro-img__mode-bottomleft {\\n  position: absolute;\\n  bottom: 0;\\n}\\n\\n.taro-img__mode-bottomright {\\n  position: absolute;\\n  right: 0;\\n  bottom: 0;\\n}',\"\"])},\"83\":function(e,t,n){\"use strict\";n.d(t,\"b\",function(){return setGlobalData}),n.d(t,\"a\",function(){return getGlobalData});var o={};function setGlobalData(e,t){o[e]=t}function getGlobalData(e){return o[e]}},\"84\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAaCAMAAABmdEcLAAAAb1BMVEUAAADUybnUybnVyLnVxLvRxbrUyLnUyLnUyLnUyLnUyLnTyrnVyLrWxrzUyLjUyLnUyLjUyLrVybnUyLnTyLnUyLnUyLrUyLnUx7nVyLjRxbjXybvUyLjUyLnUyLjVyLnUyLnVx7nWyLjUybfUyLnz64EUAAAAJHRSTlMA+edNBgvq4tzOZjQaEPTvxb6zrp6VjIJVQi0lILameXhuXVnTdyysAAAAjklEQVQY02XPSQKCMBBE0cyBgCIzAs59/zNquSAN+bt6uxJCK6/FLkUkp6OQfHPRkn6FlF6crmfQM6WRU1GBhh05UM9pVqDOMFo8KD8xWjPQxTIqHahh8gBI9nok9IkwYFdThB7giggdQM3bNneAXyK0gGyNcPtDuYGtAXkE0SZ/JN5wEA1RbQXPhmD4/gKrzhFOYLvxyAAAAABJRU5ErkJggg==\"},\"91\":function(e,t,n){\"use strict\";n(6);var o=n(0),i=n(3),r=n.n(i),a=(n(81),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),l=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var c=function(e){function Image(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Image);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Image.__proto__||Object.getPrototypeOf(Image)).apply(this,arguments));return e.state={\"isLoaded\":!1},e.imageOnLoad=e.imageOnLoad.bind(e),e._handleScroll=e._handleScroll.bind(e),e.handleScroll=e.throttle(e._handleScroll,100),e}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Image,o[\"j\"].Component),l(Image,[{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){this.props.lazyLoad&&(window.addEventListener(\"scroll\",this.handleScroll),window.addEventListener(\"resize\",this.handleScroll),this._handleScroll())}},{\"key\":\"componentWillUnMount\",\"value\":function componentWillUnMount(){this.props.lazyLoad&&(window.removeEventListener(\"scroll\",this.handleScroll),window.removeEventListener(\"resize\",this.handleScroll))}},{\"key\":\"getClientHeight\",\"value\":function getClientHeight(){return document.body.clientHeight&&document.documentElement.clientHeight?Math.min(document.body.clientHeight,document.documentElement.clientHeight):Math.max(document.body.clientHeight,document.documentElement.clientHeight)}},{\"key\":\"getScrollTop\",\"value\":function getScrollTop(){return document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body?document.body.scrollTop:window.scrollY||window.pageYOffset}},{\"key\":\"throttle\",\"value\":function throttle(e,t){var n=null;return function(){var o=this,i=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(o,i)},t)}}},{\"key\":\"_handleScroll\",\"value\":function _handleScroll(){var e=this,t=this.props.offset,n=void 0===t?0:t,i=this.getNodeTop(),r=i.nodeTop,a=i.nodeBottom,l=this.getScrollTop(),c=l+this.getClientHeight();a+n>=l&&r-n<=c&&(this.setState({\"isLoaded\":!0},function(){o.j.findDOMNode(e).children[0].src=e.props.src}),window.removeEventListener(\"scroll\",this.handleScroll),window.removeEventListener(\"resize\",this.handleScroll))}},{\"key\":\"getNodeTop\",\"value\":function getNodeTop(){var e=this.getScrollTop(),t=o.j.findDOMNode(this),n=t.getBoundingClientRect().top+e;return{\"nodeTop\":n,\"nodeBottom\":n+t.offsetHeight}}},{\"key\":\"imageOnLoad\",\"value\":function imageOnLoad(e){var t=this.props.onLoad;Object.defineProperty(e,\"detail\",{\"enumerable\":!0,\"value\":{\"width\":this.imgRef.width,\"height\":this.imgRef.height}}),t&&t(e)}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this.props,n=t.className,i=t.src,l=t.style,c=t.mode,s=t.onError,u=t.lazyLoad,m=function _objectWithoutProperties(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,[\"className\",\"src\",\"style\",\"mode\",\"onError\",\"lazyLoad\"]),d=r()(\"taro-img\",{\"taro-img__widthfix\":\"widthFix\"===c},n),p=r()(\"taro-img__mode-\"+(c||\"scaleToFill\").toLowerCase().replace(/\\s/g,\"\")),g=i;u&&(g=this.state.isLoaded?i:\"\");return o.j.createElement(\"div\",a({\"className\":d,\"style\":l},m),u?o.j.createElement(\"img\",{\"ref\":function ref(t){return e.imgRef=t},\"className\":p,\"data-src\":g,\"onLoad\":this.imageOnLoad,\"onError\":s}):o.j.createElement(\"img\",{\"ref\":function ref(t){return e.imgRef=t},\"className\":p,\"src\":g,\"onLoad\":this.imageOnLoad,\"onError\":s}))}}]),Image}();t.a=c}}]);","extractedComments":[]}